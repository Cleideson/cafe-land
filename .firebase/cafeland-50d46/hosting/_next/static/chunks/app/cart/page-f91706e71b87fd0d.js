(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{8383:function(e,t,a){Promise.resolve().then(a.bind(a,8808))},8808:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),s=a(2265),n=a(1396),l=a.n(n),c=a(4033),d=a(8387);function i(e){let{productId:t,name:a,price:n,quantity:l,onChangeQuantity:c}=e,[d,i]=(0,s.useState)(!0),[o,u]=(0,s.useState)(l);if(d)return(0,r.jsxs)("tr",{className:"bg-white text-center border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,r.jsx)("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:a}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("input",{type:"number",max:"10",min:"1",value:o,onChange:function(e){let a=JSON.parse(localStorage.getItem("cart")||"{}"),r=a.filter(e=>e.productId==t)[0],s=e.target.value;e.target.value>10&&(s=10),e.target.value<=0&&(s=1),r.quantity=s,localStorage.setItem("cart",JSON.stringify(a)),u(s),c()},className:"bg-gray-50 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Quantidade"})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:["R$ ",(n/100).toFixed(2)]}),(0,r.jsxs)("td",{className:"px-6 py-4",children:["R$ ",(n/100*o).toFixed(2)]}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsx)("button",{onClick:function(){let e=JSON.parse(localStorage.getItem("cart")||"{}"),a=e.filter(e=>e.productId==t)[0];e.splice(e.indexOf(a),1),localStorage.setItem("cart",JSON.stringify(e)),i(!1),c()},className:"font-medium text-blue-600 dark:text-red-500 hover:underline",children:"Remover"})})]})}var o=a(9898),u=a(1889);function h(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[h,x]=(0,s.useState)(null),[m,p]=(0,s.useState)("Confirmar o pedido"),[g,f]=(0,s.useState)(Boolean),[y,w]=(0,s.useState)(0),b=(0,c.useRouter)(),N=async()=>{o.I8.onAuthStateChanged(async e=>{null!=e?(e.data=await (0,o.is)(e.uid),x(e),f(!1)):(f(!0),p("Realizar login"))})};function j(){let e=JSON.parse(localStorage.getItem("cart")||"{}");if(e.length>0){let t=0;e.forEach(e=>{t+=e.price*e.quantity}),w(t)}}return s.useEffect(()=>{N().catch(e=>{});let e=JSON.parse(localStorage.getItem("cart")||"{}");t(e),j()},[]),(0,r.jsx)(d.Z,{children:(0,r.jsxs)("div",{className:"container mx-auto mt-10 bg-black-900",style:{minHeight:"800px"},children:[(0,r.jsxs)("div",{className:"relative overflow-x-hidden shadow-md sm:rounded-lg",children:[(0,r.jsx)("h1",{className:"text-5xl uppercase my-5 text-center",children:"Detalhes do pedido"}),(0,r.jsxs)("table",{className:" w-full text-sm text-left text-gray-500 dark:text-gray-400 text-center",children:[(0,r.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Nome Produto"}),(0,r.jsx)("th",{scope:"col",className:"px-1 py-3",children:"Quantidade"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Valor Unitario"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Valor Total"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:(0,r.jsx)("span",{className:"sr-only",children:"Remover"})})]})}),(0,r.jsx)("tbody",{children:Array.isArray(e)?e.map((e,t)=>(0,r.jsx)(i,{productId:e.productId,quantity:e.quantity,name:e.name,price:e.price,onChangeQuantity:j},t)):null})]})]}),(0,r.jsxs)("div",{className:"mx-auto w-full mt-5 bg-gray-600 p-5",children:[(0,r.jsx)("h5",{className:"text-2xl text-center mb-5 uppercase",children:"Resumo do pedido"}),(0,r.jsx)("p",{children:"Pagamento via PIX"}),(0,r.jsxs)("p",{children:["Total do Pedido: R$ ",(y/100).toFixed(2)]}),(0,r.jsxs)("div",{hidden:g,children:[(0,r.jsx)("h5",{className:"text-2xl text-center mb-5 uppercase",children:"Endere\xe7o para Entrega"}),(0,r.jsx)("p",{className:"mt-3",children:h?h.data.name:""}),(0,r.jsxs)("p",{children:[h?h.data.street:""," N\xb0 ",h?h.data.numberHouse:""]}),(0,r.jsxs)("p",{children:["Complemento: ",h?h.data.complement:""]}),(0,r.jsx)("p",{children:h?h.data.district:""})]})]}),(0,r.jsx)("div",{className:"justify-center flex",children:(0,r.jsx)(l(),{href:"/",className:"bg-lime-600 p-2  item-center mt-5 w-64 text-center rounded-lg",children:"Voltar as compras"})}),(0,r.jsx)("div",{className:"justify-center flex",children:(0,r.jsx)("button",{onClick:function(e){let t=JSON.parse(localStorage.getItem("cart")||"{}");if(n(!0),null!=h){if(t.length<=0){b.push("/");return}let e=t.map(e=>({productId:e.productId,productQuantity:e.quantity})),a={userId:h.uid,products:e},r=(0,u.TR)(a);r&&b.push("/orders")}else{b.push("/auth");return}},disabled:a,className:"bg-blue-900 p-4 mt-2 rounded-lg item-center w-64 text-center",children:m})})]})})}},8387:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(7437),s=a(4033),n=a(1396),l=a.n(n),c=a(2265),d=a(9898);function i(e){let{children:t}=e,[a,n]=(0,c.useState)("Login/Registrar-se"),[i,o]=(0,c.useState)(null),[u,h]=(0,c.useState)(!0),[x,m]=(0,c.useState)(Boolean),p=(0,s.useRouter)();function g(){null==i?p.push("/auth"):(d.I8.signOut(),p.push("/"),o(null),n("Login/Registrar-se"))}return(0,c.useEffect)(()=>{d.I8.onAuthStateChanged(async e=>{if(null!=e){o(e);let t=await (0,d.is)(e.uid);t.admin&&h(!1),n("Logout")}})},[]),(0,r.jsxs)("section",{className:"bg-gray-900 h-full",children:[(0,r.jsx)("nav",{className:"bg-dark border-gray-200 dark:bg-gray-950",children:(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center mx-auto max-w-screen-xl p-4",children:[(0,r.jsx)(l(),{href:"/",className:"flex items-center",children:(0,r.jsx)("span",{className:"text-2xl text-center my-2 font-semibold whitespace-nowrap dark:text-white",children:"CafeLand"})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("div",{className:"relative",hidden:null==i,children:[(0,r.jsxs)("button",{onClick:()=>m(!x),className:"flex relative rounded-md bg-blue-600 text-gray-200  p-2 text-sm",children:[null!=i?i.email:"",(0,r.jsx)("svg",{className:"h-5 w-5 text-white-800",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10    10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),(0,r.jsx)("div",{onClick:()=>m(!1),hidden:!x,className:"fixed inset-0 h-full w-full z-10"}),(0,r.jsxs)("div",{hidden:!x,className:"absolute text-center right-0 mt-2 py-2 w-48 bg-gray-900 text-white-800 rounded-md shadow-xl z-20",children:[u?"":(0,r.jsx)(l(),{to:"/admin",href:"/admin",className:"block px-4 py-2 text-sm capitalize hover:bg-indigo-500 hover:text-white",children:"Adminstra\xe7\xe3o"}),(0,r.jsx)("a",{href:"/orders",className:"block px-4 py-2 text-sm capitalize hover:bg-indigo-500 hover:text-white",children:"Meus Pedidos"}),(0,r.jsx)("button",{onClick:g,className:"w-full px-4 py-2 text-sm capitalize hover:bg-indigo-500 hover:text-white",children:"Logout"})]})]})}),(0,r.jsx)("button",{onClick:g,hidden:null!=i,className:"text-sm text-blue-600 dark:text-blue-500 hover:underline ",children:"Login/Registrar-se"}),(0,r.jsx)(l(),{href:"/cart",className:"ml-2  p-2 bg-slate-950 rounded-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 18 21",children:(0,r.jsx)("path",{d:"M15 12a1 1 0 0 0 .962-.726l2-7A1 1 0 0 0 17 3H3.77L3.175.745A1 1 0 0 0 2.208 0H1a1 1 0 0 0 0 2h.438l.6 2.255v.019l2 7 .746 2.986A3 3 0 1 0 9 17a2.966 2.966 0 0 0-.184-1h2.368c-.118.32-.18.659-.184 1a3 3 0 1 0 3-3H6.78l-.5-2H15Z"})})})]})]})}),t,(0,r.jsx)("footer",{className:"bg-white shadow mt-20 dark:bg-gray-950 w-full mt-10",children:(0,r.jsxs)("div",{className:"w-full mx-auto max-w-screen-xl p-4 md:flex md:items-center md:justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500 sm:text-center dark:text-gray-400 text-center",children:"\xa9 2023 Todos Direitos Reservados"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500 sm:text-center dark:text-gray-400 text-center",children:[(0,r.jsx)("p",{children:"Aluno: Cleideson Barbos da Silva"}),(0,r.jsx)("p",{className:"text-left",children:"RGM:"})]})]})})]})}},9898:function(e,t,a){"use strict";a.d(t,{I8:function(){return l},fZ:function(){return d},is:function(){return o},tJ:function(){return i}});var r=a(6262),s=a(3085),n=a(4086);let l=(0,s.v0)(r.l),c=(0,n.ad)(r.l),d=async(e,t)=>{try{return await (0,s.e5)(l,e,t),!0}catch(e){throw e}},i=async e=>{try{let t=await (0,s.Xb)(l,e.email||"",e.password||""),a=t.user;return delete e.password,await (0,n.pl)((0,n.JU)(c,"users",a.uid),{uid:a.uid,...e}),!0}catch(e){throw e}},o=async e=>{try{let t=(0,n.QT)((0,n.JU)(c,"users",e));return(await t).data()}catch(e){throw e}}},6262:function(e,t,a){"use strict";a.d(t,{l:function(){return s}});var r=a(994);let s=(0,r.ZF)({apiKey:"AIzaSyBGB-m-og9OkCB9z5qMQJXDIojX9XrgaDo",authDomain:"cafeland-50d46.firebaseapp.com",projectId:"cafeland-50d46",storageBucket:"cafeland-50d46.appspot.com",messagingSenderId:"1054668250666",appId:"1:1054668250666:web:51b83642d155ea8192ad53",measurementId:"G-E8FKM6SVYT"})},1889:function(e,t,a){"use strict";a.d(t,{AU:function(){return u},Cs:function(){return i},TR:function(){return d},c9:function(){return o}});var r=a(6262),s=a(4086),n=a(2114),l=a(180);let c=(0,s.ad)(r.l),d=async e=>{try{let t=(0,n.h)(),a=0;for(let t of e.products){let e=await (0,l.wv)(t.productId);a+=e.productPrice*t.productQuantity}return await (0,s.pl)((0,s.JU)(c,"orders",t),{...e,status:"paymentPending",totalValue:a}),!0}catch(e){throw e}},i=async(e,t)=>{try{let a=(0,s.JU)(c,"orders",e);return await (0,s.r7)(a,{status:t}),!0}catch(e){return!1}},o=async e=>{let t=[];try{let a=(0,s.IO)((0,s.hJ)(c,"orders"),(0,s.ar)("userId","==",e)),r=await (0,s.PL)(a);for(let e of r.docs){let a=await (0,s.QT)((0,s.JU)(c,"users",e.data().userId)),r=a.data().name,n=e.data();switch(n.clientName=r,n.id=e.id,n.status){case"0":n.statusName="Cancelado";break;case"1":n.statusName="Aguardando Pagamento";break;case"2":n.statusName="Pedido Recebido";break;case"3":n.statusName="Pedido Enviado";break;case"4":n.statusName="Entregue";break;default:n.statusName=null}t.push(n)}return t}catch(e){return console.log(e),null}},u=async()=>{try{let e=await (0,s.PL)((0,s.hJ)(c,"orders")),t=[];for(let a of e.docs){let e=await (0,s.QT)((0,s.JU)(c,"users",a.data().userId)),r=e.data().name,n=a.data();switch(n.id=a.id,n.clientName=r,n.status){case"0":n.statusName="Cancelado";break;case"1":n.statusName="Aguardando Pagamento";break;case"2":n.statusName="Pedido Recebido";break;case"3":n.statusName="Pedido Enviado";break;case"4":n.statusName="Entregue";break;default:n.statusName=null}t.push(n)}return t}catch(e){throw e}}},180:function(e,t,a){"use strict";a.d(t,{Ir:function(){return d},Xp:function(){return i},gg:function(){return c},wv:function(){return o}});var r=a(6262),s=a(4086),n=a(2114);let l=(0,s.ad)(r.l),c=async e=>{try{return e.productPrice=100*e.productPrice,e.uid?await (0,s.r7)((0,s.JU)(l,"products",e.uid),{...e}):(e.uid=(0,n.h)(),await (0,s.pl)((0,s.JU)(l,"products",e.uid),{...e})),!0}catch(e){throw e}},d=async e=>{try{return await (0,s.oe)((0,s.JU)(l,"products",e)),!0}catch(e){throw e}},i=async()=>{try{let e=await (0,s.PL)((0,s.hJ)(l,"products")),t=[];return e.forEach(e=>{t.push(e.data())}),t}catch(e){throw e}},o=async e=>{try{let t=(0,s.JU)(l,"products",e),a=await (0,s.QT)(t);if(a.exists())return a.data();return null}catch(e){throw e}}},2114:function(e,t,a){"use strict";a.d(t,{h:function(){return l}});for(var r,s=256,n=[];s--;)n[s]=(s+256).toString(16).substring(1);function l(e){var t=0,a=e||11;if(!r||s+a>512)for(r="",s=0;t<256;t++)r+=n[256*Math.random()|0];return r.substring(s,s+++a)}}},function(e){e.O(0,[358,214,506,971,596,744],function(){return e(e.s=8383)}),_N_E=e.O()}]);